{% extends "base.html" %}
{% block title %}{{ post.title }} | {{ block.super }}{% endblock %}
{% block content %}

<div class="card shadow-sm">
  {% if post.image %}
    <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.title }}">
  {% endif %}
  <div class="card-body">
    <h3 class="card-title">{{ post.title }}</h3>
    <p class="text-muted small mb-3">
      by {{ post.user.username|default:post.user.email }} • {{ post.created_at|date:"M d, Y H:i" }}
    </p>
    <p class="card-text">{{ post.text|linebreaks }}</p>

    <div class="d-flex justify-content-between mt-4">
      <div>
        <span class="badge bg-light text-dark border">❤️ {{ post.likes_count }}</span>
      </div>
      {% if user == post.user %}
        <div>
          <a href="{% url 'posts:edit' post.pk %}" class="btn btn-sm btn-outline-secondary">Edit</a>
          <a href="{% url 'posts:delete' post.pk %}" class="btn btn-sm btn-outline-danger">Delete</a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<a href="{% url 'posts:list' %}" class="btn btn-link mt-3">← Back to posts</a>

{% endblock %}
