{% load static %}

{% if user.is_authenticated and user != profile_user %}
<button
  type="button"
  class="btn subscribe-btn {% if is_subscribed %}subscribed{% endif %}"
  aria-pressed="{% if is_subscribed %}true{% else %}false{% endif %}"
  data-toggle-url="{% url 'subscriptions:toggle' profile_user.pk %}"
  data-user-id="{{ profile_user.pk }}"
  data-followers-count="{{ followers_count|default:0 }}"
>
  <span class="subscribe-label">{% if is_subscribed %}Following{% else %}Follow{% endif %}</span>
  &nbsp;
  <span class="followers-count">{{ followers_count|default:0 }}</span>
</button>

{% elif not user.is_authenticated %}
  <a class="btn btn-sm btn-outline-primary" href="{% url 'account_login' %}?next={{ request.path }}">Follow</a>
{% endif %}

{% block extra_css %}
    <style>
    /* Modern follow pill */
.subscribe-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.55rem;
  padding: 0.32rem 0.65rem;
  border-radius: 999px;
  font-weight: 600;
  font-size: 0.95rem;
  line-height: 1;
  border: 1px solid transparent;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .12s ease, background-color .18s ease, color .12s ease;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  /* primary gradient */
  background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
  color: #fff;
  box-shadow: 0 6px 18px rgba(37,99,235,0.14);
  padding-left: 0.7rem;
  padding-right: 0.7rem;
}

/* icon styling */
.follow-pill .fp-icon svg { display: block; stroke: currentColor; }

/* small separator */
.follow-pill .fp-sep { opacity: 0.9; color: rgba(255,255,255,0.85); margin: 0 0.1rem; }

/* subscribed (outline) */
.follow-pill.subscribed {
  background: transparent;
  color: var(--bs-primary, #2563eb);
  border-color: rgba(37,99,235,0.12);
  box-shadow: none;
}

/* subtle hover/focus */
.follow-pill:hover { transform: translateY(-2px); }
.follow-pill:active { transform: translateY(0); }
.follow-pill:focus-visible {
  outline: 3px solid rgba(37,99,235,0.14);
  outline-offset: 2px;
}

/* count style */
.follow-pill .fp-count {
  font-weight: 700;
  opacity: 0.95;
}

/* smaller on mobile */
@media (max-width: 576px) {
  .follow-pill { font-size: 0.88rem; padding: 0.28rem 0.5rem; gap: .4rem; }
}

    </style>

{% endblock %}
